
using System.Collections;
using System.Collections.Generic;
using System;
using UnityEngine;
using Random = UnityEngine.Random;

public class Sardine : MonoBehaviour
{
    public GameObject player;  //①動かしたいオブジェクトをインスペクターから入れる。
    public int speed = 1;  //オブジェクトが自動で動くスピード調整
    Vector3 movePosition;  //②オブジェクトの目的地を保存
    private Action _onDisable;  // 非アクティブ化するためのコールバック
    private float _elapsedTime;  // 初期化されてからの経過時間


        void Start()
    {
        movePosition = moveRandomPosition();  //②実行時、オブジェクトの目的地を設定
    }
    void Update()
    {
        if (movePosition == player.transform.position)  //②playerオブジェクトが目的地に到達すると、
        {
            movePosition = moveRandomPosition();  //②目的地を再設定
        }
        this.player.transform.position = Vector3.MoveTowards(player.transform.position, movePosition, speed * Time.deltaTime);  //①②playerオブジェクトが, 目的地に移動, 移動速度
        // SpriteRendererコンポーネントを取得
        SpriteRenderer spriteRenderer = GetComponent<SpriteRenderer>();
        if (player.transform.position.x < movePosition.x)
        {
            if (spriteRenderer.flipX == false)
            {
                // X軸に反転を適用
                spriteRenderer.flipX = true;
            }
        }


        if (player.transform.position.x > movePosition.x)
        {
            if (spriteRenderer.flipX == true)
            {
                // X軸に反転を適用
                spriteRenderer.flipX = false;
            }
        }
    }

    void DelayMethod()
    {
        
    }

    private Vector3 moveRandomPosition()  // 目的地を生成、xとyのポジションをランダムに値を取得 
    {
        Vector3 randomPosi = new Vector3(Random.Range(-7, 7), Random.Range(-4, 4), 1);
        return randomPosi;
    }
}